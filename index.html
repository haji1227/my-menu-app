<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Menu</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 20px; background: #f8f9fa; color: #2d3748; }
        .container { max-width: 600px; margin: 0 auto; padding-bottom: 80px;} /* Padding for fixed footer */
        
        /* Typography */
        h1 { font-size: 1.5rem; text-align: center; margin-bottom: 20px; font-weight: 800; letter-spacing: -0.5px; }
        h2 { font-size: 1.1rem; margin: 0; font-weight: 700; color: #4a5568; }
        
        /* Card & Layout */
        .day-section { margin-bottom: 20px; }
        .day-header { 
            background: #edf2f7; 
            padding: 8px 12px; 
            border-radius: 8px 8px 0 0; 
            font-size: 0.9rem; 
            font-weight: bold; 
            color: #718096;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .day-body { 
            background: white; 
            min-height: 50px; 
            border: 1px solid #e2e8f0; 
            border-top: none; 
            border-radius: 0 0 8px 8px; 
            padding: 10px; 
        }

        /* Dish Item */
        .dish-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 8px 0; 
            border-bottom: 1px solid #f0f0f0; 
        }
        .dish-item:last-child { border-bottom: none; }
        .dish-name { font-weight: 500; font-size: 1rem; }
        .dish-actions a { color: #5a67d8; text-decoration: none; margin-right: 10px; font-size: 0.9rem;}
        .dish-actions button { background: none; border: none; color: #e53e3e; cursor: pointer; font-size: 1.2rem; }

        /* Floating Input Form (Fixed at bottom) */
        .input-area {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 100;
        }
        select, input {
            padding: 12px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 16px;
        }
        select { flex: 1; } /* Day selector */
        input { flex: 2; }  /* Name input */
        
        .btn-add {
            background: #2d3748;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            flex: 0 0 auto;
        }

        /* Utility */
        .header-actions { text-align: right; margin-bottom: 10px; }
        .btn-reset { font-size: 0.8rem; color: #e53e3e; background: none; border: 1px solid #e53e3e; padding: 4px 8px; border-radius: 4px; }
        .notion-tag { font-size: 0.7rem; background: #ebf4ff; color: #4299e1; padding: 2px 6px; border-radius: 4px; margin-left: 5px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-actions">
        <button onclick="clearWeek()" class="btn-reset">Reset Week ‚Üª</button>
    </div>
    <h1>Weekly Planner üóìÔ∏è</h1>

    <div id="calendarView"></div>
    
    <div style="height: 100px;"></div>
</div>

<div class="input-area">
    <select id="daySelect">
        <option value="Mon">Mon</option>
        <option value="Tue">Tue</option>
        <option value="Wed">Wed</option>
        <option value="Thu">Thu</option>
        <option value="Fri">Fri</option>
        <option value="Sat">Sat</option>
        <option value="Sun">Sun</option>
    </select>
    <input type="text" id="dishName" placeholder="Menu...">
    <input type="text" id="notionLink" placeholder="URL (Optional)" style="display:none;"> <button onclick="addDish()" class="btn-add">Add</button>
</div>

<script>
    // Data Structure: Array of objects { id, day, name, link }
    let planner = JSON.parse(localStorage.getItem('myMenuApp_planner')) || [];
    const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

    function render() {
        const view = document.getElementById('calendarView');
        view.innerHTML = '';

        days.forEach(day => {
            // Filter dishes for this day
            const daysDishes = planner.filter(d => d.day === day);
            
            let dishesHtml = '';
            if (daysDishes.length === 0) {
                dishesHtml = '<div style="color:#a0aec0; font-size:0.9rem; text-align:center;">No Plan</div>';
            } else {
                daysDishes.forEach(dish => {
                    let linkIcon = dish.link ? `<a href="${dish.link}" target="_blank">Recipe ‚Üó</a>` : '';
                    dishesHtml += `
                        <div class="dish-item">
                            <div>
                                <span class="dish-name">${dish.name}</span>
                            </div>
                            <div class="dish-actions">
                                ${linkIcon}
                                <button onclick="removeDish(${dish.id})">√ó</button>
                            </div>
                        </div>
                    `;
                });
            }

            view.innerHTML += `
                <div class="day-section">
                    <div class="day-header">
                        <span>${day}</span>
                    </div>
                    <div class="day-body">
                        ${dishesHtml}
                    </div>
                </div>
            `;
        });
    }

    function addDish() {
        const day = document.getElementById('daySelect').value;
        const nameInput = document.getElementById('dishName');
        const name = nameInput.value;
        // Simple URL prompt if needed, for now just name to keep UI clean
        // To add URL: type "Curry http..." or we can add a toggle.
        // Let's parse URL from text if present, or just simple name for now.
        
        if(name) {
            const newDish = {
                id: Date.now(),
                day: day,
                name: name,
                link: '' // Simplified for speed
            };
            planner.push(newDish);
            save();
            render();
            nameInput.value = '';
        }
    }

    function removeDish(id) {
        planner = planner.filter(d => d.id !== id);
        save();
        render();
    }

    function clearWeek() {
        if(confirm('Start a new week? All menus will be cleared.')) {
            planner = [];
            save();
            render();
        }
    }

    function save() {
        localStorage.setItem('myMenuApp_planner', JSON.stringify(planner));
    }

    // Initial Render
    render();
</script>

</body>
</html>
